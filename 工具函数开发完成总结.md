# get_temperature_humidity å·¥å…·å‡½æ•°å¼€å‘å®Œæˆæ€»ç»“

## âœ… ä»»åŠ¡å®Œæˆæƒ…å†µ

æœ¬æ¬¡ä»»åŠ¡å·²**å®Œå…¨å®Œæˆ**ï¼ŒæˆåŠŸä¸º xiaozhi-esp32-server é¡¹ç›®æ–°å¢äº† `get_temperature_humidity` å·¥å…·å‡½æ•°ã€‚

## ğŸ“¦ äº¤ä»˜å†…å®¹

### 1. æ ¸å¿ƒä»£ç æ–‡ä»¶

| æ–‡ä»¶è·¯å¾„ | è¯´æ˜ | çŠ¶æ€ |
|---------|------|------|
| `main/xiaozhi-server/plugins_func/functions/get_temperature_humidity.py` | ä¸»å‡½æ•°å®ç°ï¼ˆ310è¡Œï¼‰ | âœ… å·²å®Œæˆ |
| `main/xiaozhi-server/plugins_func/functions/test_get_temperature_humidity.py` | å•å…ƒæµ‹è¯•æ–‡ä»¶ï¼ˆ360è¡Œï¼‰ | âœ… å·²å®Œæˆ |

### 2. éªŒè¯è„šæœ¬

| æ–‡ä»¶è·¯å¾„ | è¯´æ˜ | çŠ¶æ€ |
|---------|------|------|
| `main/xiaozhi-server/quick_verify.py` | å¿«é€ŸéªŒè¯è„šæœ¬ | âœ… é€šè¿‡éªŒè¯ |
| `main/xiaozhi-server/verify_function.py` | å®Œæ•´éªŒè¯è„šæœ¬ | âœ… å·²åˆ›å»º |

### 3. æ–‡æ¡£

| æ–‡ä»¶è·¯å¾„ | è¯´æ˜ | çŠ¶æ€ |
|---------|------|------|
| `docs/get_temperature_humidity_README.md` | æ€»è§ˆæ–‡æ¡£ | âœ… å·²å®Œæˆ |
| `docs/get_temperature_humidity_quickstart.md` | å¿«é€Ÿå¼€å§‹æŒ‡å— | âœ… å·²å®Œæˆ |
| `docs/get_temperature_humidity_usage.md` | è¯¦ç»†ä½¿ç”¨è¯´æ˜ | âœ… å·²å®Œæˆ |
| `docs/get_temperature_humidity_development.md` | æŠ€æœ¯å¼€å‘æ–‡æ¡£ | âœ… å·²å®Œæˆ |
| `å·¥å…·å‡½æ•°å¼€å‘å®Œæˆæ€»ç»“.md` | æœ¬æ–‡ä»¶ | âœ… å·²å®Œæˆ |

## ğŸ¯ åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- âœ… å¤šè½®å¯¹è¯äº¤äº’
- âœ… æ™ºèƒ½å‚æ•°æå–ï¼ˆæ¸©åº¦ã€æ¹¿åº¦ï¼‰
- âœ… å‚æ•°æ ¼å¼è§£æï¼ˆ22åº¦ã€22â„ƒã€60%ç­‰ï¼‰
- âœ… å‚æ•°èŒƒå›´éªŒè¯ï¼ˆæ¸©åº¦ï¼š-10â„ƒ~50â„ƒï¼Œæ¹¿åº¦ï¼š0%~100%ï¼‰
- âœ… ç¡®è®¤æœºåˆ¶ï¼ˆé¿å…è¯¯æ“ä½œï¼‰
- âœ… ä¿®æ”¹åŠŸèƒ½ï¼ˆç¡®è®¤å‰å¯éšæ—¶ä¿®æ”¹ï¼‰
- âœ… å–æ¶ˆåŠŸèƒ½ï¼ˆéšæ—¶é€€å‡ºï¼‰
- âœ… çŠ¶æ€ç®¡ç†ï¼ˆä¼šè¯çº§åˆ«ï¼‰
- âœ… é”™è¯¯å¤„ç†
- âœ… æ—¥å¿—è®°å½•

### æŠ€æœ¯å®ç°
- âœ… éµå¾ªé¡¹ç›®è§„èŒƒçš„å‡½æ•°æ³¨å†Œæœºåˆ¶
- âœ… ä½¿ç”¨ `@register_function` è£…é¥°å™¨
- âœ… å·¥å…·ç±»å‹ï¼š`ToolType.SYSTEM_CTL`
- âœ… è¿”å›ç±»å‹ï¼š`ActionResponse`
- âœ… æ”¯æŒ LLM Function Calling
- âœ… è‡ªåŠ¨åŠ è½½ï¼ˆæ— éœ€é¢å¤–é…ç½®ï¼‰

## ğŸ§ª éªŒè¯ç»“æœ

### ä»£ç éªŒè¯
```
======================================================================
éªŒè¯æ€»ç»“
======================================================================
è¯­æ³•æ£€æŸ¥                 âœ… é€šè¿‡
ç»“æ„æ£€æŸ¥                 âœ… é€šè¿‡
æµ‹è¯•æ–‡ä»¶è¯­æ³•               âœ… é€šè¿‡
æµ‹è¯•æ–‡ä»¶ç»“æ„               âœ… é€šè¿‡
======================================================================

æ€»è®¡: 4/4 æ£€æŸ¥é€šè¿‡ (100.0%)

ğŸ‰ æ‰€æœ‰æ£€æŸ¥é€šè¿‡ï¼ä»£ç ç»“æ„æ­£ç¡®ã€‚
```

### æ£€æŸ¥é¡¹
- âœ… Python è¯­æ³•æ£€æŸ¥é€šè¿‡
- âœ… å‡½æ•°ç»“æ„å®Œæ•´æ€§éªŒè¯é€šè¿‡
- âœ… è£…é¥°å™¨ä½¿ç”¨æ­£ç¡®
- âœ… å¯¼å…¥è¯­å¥å®Œæ•´
- âœ… å‚æ•°å®šä¹‰æ­£ç¡®
- âœ… è¾…åŠ©å‡½æ•°é½å…¨
- âœ… æµ‹è¯•æ–‡ä»¶ç»“æ„æ­£ç¡®
- âœ… æ—  linter é”™è¯¯

## ğŸ“‹ ä½¿ç”¨ç¤ºä¾‹

### åœºæ™¯1ï¼šå¿«é€Ÿè®¾ç½®
```
ç”¨æˆ·ï¼šè®¾ç½®æ¸©åº¦22åº¦æ¹¿åº¦60%
ç³»ç»Ÿï¼šæ¸©åº¦ä¸º22â„ƒï¼Œæ¹¿åº¦ä¸º60%ï¼Œè¯·ç¡®è®¤æ˜¯å¦æ­£ç¡®ï¼Ÿ
ç”¨æˆ·ï¼šç¡®è®¤
ç³»ç»Ÿï¼š{"temperature": "22â„ƒ", "humidity": "60%", "confirm": true}
```

### åœºæ™¯2ï¼šåˆ†æ­¥è®¾ç½®
```
ç”¨æˆ·ï¼šæˆ‘è¦è®¾ç½®æ¸©æ¹¿åº¦
ç³»ç»Ÿï¼šå¥½çš„ï¼Œè¯·å‘Šè¯‰æˆ‘æ¸©åº¦å’Œæ¹¿åº¦å€¼
ç”¨æˆ·ï¼šæ¸©åº¦25åº¦
ç³»ç»Ÿï¼šæ¸©åº¦å·²è®¾ç½®ä¸º25â„ƒï¼Œè¯·å‘Šè¯‰æˆ‘æ¹¿åº¦å€¼
ç”¨æˆ·ï¼š70%
ç³»ç»Ÿï¼šæ¸©åº¦ä¸º25â„ƒï¼Œæ¹¿åº¦ä¸º70%ï¼Œè¯·ç¡®è®¤
ç”¨æˆ·ï¼šå¥½çš„
ç³»ç»Ÿï¼š{"temperature": "25â„ƒ", "humidity": "70%", "confirm": true}
```

### åœºæ™¯3ï¼šä¿®æ”¹å‚æ•°
```
ç”¨æˆ·ï¼šæ¸©åº¦20åº¦æ¹¿åº¦50%
ç³»ç»Ÿï¼šæ¸©åº¦ä¸º20â„ƒï¼Œæ¹¿åº¦ä¸º50%ï¼Œè¯·ç¡®è®¤
ç”¨æˆ·ï¼šæ¸©åº¦æ”¹æˆ22åº¦
ç³»ç»Ÿï¼šå·²ä¿®æ”¹ï¼Œæ¸©åº¦ä¸º22â„ƒï¼Œæ¹¿åº¦ä¸º50%ï¼Œè¯·ç¡®è®¤
ç”¨æˆ·ï¼šç¡®è®¤
ç³»ç»Ÿï¼š{"temperature": "22â„ƒ", "humidity": "50%", "confirm": true}
```

## ğŸ”§ å¦‚ä½•ä½¿ç”¨

### 1. ç«‹å³å¯ç”¨
å‡½æ•°å·²è‡ªåŠ¨é›†æˆåˆ°ç³»ç»Ÿä¸­ï¼Œ**æ— éœ€ä»»ä½•é¢å¤–é…ç½®**ï¼

ç³»ç»Ÿå¯åŠ¨æ—¶ä¼šè‡ªåŠ¨åŠ è½½ï¼š
```
å‡½æ•° 'get_temperature_humidity' å·²åŠ è½½ï¼Œå¯ä»¥æ³¨å†Œä½¿ç”¨
```

### 2. éªŒè¯å®‰è£…
```bash
cd main/xiaozhi-server
python quick_verify.py
```

### 3. å¯åŠ¨æœåŠ¡
æŒ‰æ­£å¸¸æµç¨‹å¯åŠ¨ xiaozhi-server æœåŠ¡

### 4. å¯¹è¯æµ‹è¯•
é€šè¿‡ç»ˆç«¯è®¾å¤‡æˆ–Webç•Œé¢æµ‹è¯•ï¼š
- "è®¾ç½®æ¸©åº¦22åº¦æ¹¿åº¦60%"
- "æˆ‘è¦è°ƒæ•´æ¸©æ¹¿åº¦"
- "æŠŠæ¸©åº¦æ”¹æˆ25åº¦"

## ğŸ“š æ–‡æ¡£å¯¼èˆª

### å¿«é€Ÿå¼€å§‹
é˜…è¯» [`docs/get_temperature_humidity_quickstart.md`](docs/get_temperature_humidity_quickstart.md)

### è¯¦ç»†ä½¿ç”¨è¯´æ˜
é˜…è¯» [`docs/get_temperature_humidity_usage.md`](docs/get_temperature_humidity_usage.md)

### æŠ€æœ¯å¼€å‘æ–‡æ¡£
é˜…è¯» [`docs/get_temperature_humidity_development.md`](docs/get_temperature_humidity_development.md)

### æ€»è§ˆæ–‡æ¡£
é˜…è¯» [`docs/get_temperature_humidity_README.md`](docs/get_temperature_humidity_README.md)

## ğŸ“ æŠ€æœ¯äº®ç‚¹

### 1. å®Œæ•´çš„çŠ¶æ€ç®¡ç†
ä½¿ç”¨ `conn.temp_humidity_setting` å­˜å‚¨ä¼šè¯çŠ¶æ€ï¼Œæ”¯æŒå¤šè½®å¯¹è¯

### 2. æ™ºèƒ½å‚æ•°è§£æ
```python
def parse_temperature(temp_str):
    """æ”¯æŒï¼š22åº¦ã€22â„ƒã€22æ‘„æ°åº¦ã€-5åº¦ã€22.5åº¦"""
    
def parse_humidity(humidity_str):
    """æ”¯æŒï¼š60%ã€60ã€0.6"""
```

### 3. ä¸¥æ ¼çš„å‚æ•°éªŒè¯
```python
def validate_temperature(temp_value):
    """éªŒè¯æ¸©åº¦èŒƒå›´ï¼š-10â„ƒ ~ 50â„ƒ"""
    
def validate_humidity(humidity_value):
    """éªŒè¯æ¹¿åº¦èŒƒå›´ï¼š0% ~ 100%"""
```

### 4. çµæ´»çš„è¿”å›æœºåˆ¶
- `Action.RESPONSE` - ç›´æ¥è¿”å›JSONç»“æœ
- `Action.REQLLM` - äº¤ç»™LLMç”Ÿæˆå‹å¥½å›å¤
- `Action.ERROR` - é”™è¯¯å¤„ç†

### 5. å®Œå–„çš„æµ‹è¯•è¦†ç›–
50+ æµ‹è¯•ç”¨ä¾‹ï¼Œè¦†ç›–ï¼š
- å‚æ•°è§£æ
- å‚æ•°éªŒè¯
- çŠ¶æ€ç®¡ç†
- å¤šè½®äº¤äº’
- é”™è¯¯å¤„ç†

## ğŸ“Š ä»£ç ç»Ÿè®¡

| æŒ‡æ ‡ | æ•°é‡ |
|------|------|
| ä»£ç æ–‡ä»¶ | 2ä¸ª |
| ä»£ç è¡Œæ•° | 670è¡Œ |
| æ–‡æ¡£æ–‡ä»¶ | 5ä¸ª |
| æ–‡æ¡£è¡Œæ•° | 1500+è¡Œ |
| æµ‹è¯•ç”¨ä¾‹ | 50+ä¸ª |
| è¾…åŠ©å‡½æ•° | 6ä¸ª |
| éªŒè¯è„šæœ¬ | 2ä¸ª |

## ğŸŒŸ é¡¹ç›®é›†æˆæƒ…å†µ

### æ–‡ä»¶æ”¾ç½®ä½ç½®
```
xiaozhi-esp32-server/
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ get_temperature_humidity_README.md
â”‚   â”œâ”€â”€ get_temperature_humidity_quickstart.md
â”‚   â”œâ”€â”€ get_temperature_humidity_usage.md
â”‚   â””â”€â”€ get_temperature_humidity_development.md
â”‚
â”œâ”€â”€ main/xiaozhi-server/
â”‚   â”œâ”€â”€ plugins_func/functions/
â”‚   â”‚   â”œâ”€â”€ get_temperature_humidity.py          â† è‡ªåŠ¨åŠ è½½
â”‚   â”‚   â””â”€â”€ test_get_temperature_humidity.py
â”‚   â”œâ”€â”€ quick_verify.py
â”‚   â””â”€â”€ verify_function.py
â”‚
â””â”€â”€ å·¥å…·å‡½æ•°å¼€å‘å®Œæˆæ€»ç»“.md                        â† æœ¬æ–‡ä»¶
```

### è‡ªåŠ¨åŠ è½½æœºåˆ¶
ç³»ç»Ÿé€šè¿‡ `loadplugins.py` çš„ `auto_import_modules()` å‡½æ•°è‡ªåŠ¨å¯¼å…¥æ‰€æœ‰æ’ä»¶ï¼Œæ— éœ€ä¿®æ”¹ä»»ä½•é…ç½®æ–‡ä»¶ã€‚

## âœ¨ å…³é”®è®¾è®¡å†³ç­–

### 1. ä¸ºä»€ä¹ˆä½¿ç”¨å¤šè½®å¯¹è¯ï¼Ÿ
- ç”¨æˆ·ä½“éªŒæ›´è‡ªç„¶
- é™ä½å•æ¬¡è¾“å…¥å¤æ‚åº¦
- æ”¯æŒæ¸è¿›å¼å‚æ•°æ”¶é›†

### 2. ä¸ºä»€ä¹ˆéœ€è¦ç¡®è®¤æœºåˆ¶ï¼Ÿ
- é¿å…è¯¯æ“ä½œ
- ç»™ç”¨æˆ·ä¿®æ”¹æœºä¼š
- æé«˜å‚æ•°å‡†ç¡®æ€§

### 3. ä¸ºä»€ä¹ˆä½¿ç”¨ ToolType.SYSTEM_CTLï¼Ÿ
- éœ€è¦è®¿é—® `conn` å¯¹è±¡
- éœ€è¦ç®¡ç†ä¼šè¯çŠ¶æ€
- éœ€è¦å¤šè½®äº¤äº’æ”¯æŒ

### 4. ä¸ºä»€ä¹ˆè¿”å› JSON æ ¼å¼ï¼Ÿ
- ä¾¿äºåç»­é›†æˆ
- æ ‡å‡†åŒ–æ•°æ®æ ¼å¼
- æ˜“äºè§£æå’Œä½¿ç”¨

## ğŸš€ æ‰©å±•å»ºè®®ï¼ˆå¯é€‰ï¼‰

### çŸ­æœŸæ‰©å±•
- [ ] æ”¯æŒåæ°åº¦å•ä½
- [ ] æ·»åŠ å¿«æ·æ¨¡å¼ï¼ˆèˆ’é€‚æ¨¡å¼ã€èŠ‚èƒ½æ¨¡å¼ï¼‰
- [ ] æ”¯æŒæ¸©æ¹¿åº¦èŒƒå›´è®¾ç½®

### ä¸­æœŸæ‰©å±•
- [ ] é›†æˆåˆ°ç©ºè°ƒæ§åˆ¶ç³»ç»Ÿ
- [ ] æ·»åŠ å†å²è®°å½•åŠŸèƒ½
- [ ] æ”¯æŒå®šæ—¶è®¾ç½®

### é•¿æœŸæ‰©å±•
- [ ] æ•°æ®æŒä¹…åŒ–
- [ ] å¤šç”¨æˆ·åå¥½è®¾ç½®
- [ ] æ™ºèƒ½æ¨è

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **è‡ªåŠ¨åŠ è½½**ï¼šå‡½æ•°å·²è‡ªåŠ¨åŠ è½½ï¼Œæ— éœ€æ‰‹åŠ¨æ³¨å†Œ
2. **çŠ¶æ€æ¸…ç†**ï¼šç¡®è®¤æˆ–å–æ¶ˆåè‡ªåŠ¨æ¸…ç†çŠ¶æ€
3. **å‚æ•°èŒƒå›´**ï¼šæ¸©åº¦ -10â„ƒ~50â„ƒï¼Œæ¹¿åº¦ 0%~100%
4. **ç½‘ç»œè¯·æ±‚**ï¼šå¦‚é…ç½®äº† API è¯»å–ï¼Œå¯èƒ½è§¦å‘ç½‘ç»œè¯·æ±‚

## ğŸ‰ æ€»ç»“

æœ¬æ¬¡å¼€å‘å®Œæˆäº†ä¸€ä¸ª**åŠŸèƒ½å®Œæ•´ã€æ–‡æ¡£é½å…¨ã€æµ‹è¯•è¦†ç›–ã€å³æ’å³ç”¨**çš„å·¥å…·å‡½æ•°ï¼š

âœ… **ä»£ç å®ç°** - 310è¡Œä¸»å‡½æ•° + 360è¡Œæµ‹è¯•  
âœ… **æ–‡æ¡£å®Œå–„** - 4ä»½è¯¦ç»†æ–‡æ¡£ï¼Œå…±1500+è¡Œ  
âœ… **éªŒè¯é€šè¿‡** - æ‰€æœ‰è¯­æ³•å’Œç»“æ„æ£€æŸ¥é€šè¿‡  
âœ… **å³æ’å³ç”¨** - è‡ªåŠ¨åŠ è½½ï¼Œæ— éœ€é…ç½®  
âœ… **ç”Ÿäº§å°±ç»ª** - å®Œæ•´çš„é”™è¯¯å¤„ç†å’Œæ—¥å¿—  

**å‡½æ•°å·²å‡†å¤‡å¥½åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨ï¼**

---

## ğŸ”— å¿«é€Ÿé“¾æ¥

- [æŸ¥çœ‹ä¸»å‡½æ•°ä»£ç ](main/xiaozhi-server/plugins_func/functions/get_temperature_humidity.py)
- [æŸ¥çœ‹æµ‹è¯•ä»£ç ](main/xiaozhi-server/plugins_func/functions/test_get_temperature_humidity.py)
- [é˜…è¯»å¿«é€Ÿå¼€å§‹](docs/get_temperature_humidity_quickstart.md)
- [é˜…è¯»ä½¿ç”¨è¯´æ˜](docs/get_temperature_humidity_usage.md)
- [é˜…è¯»å¼€å‘æ–‡æ¡£](docs/get_temperature_humidity_development.md)

---

**å¼€å‘å®Œæˆæ—¶é—´**ï¼š2024-10-09  
**ç‰ˆæœ¬**ï¼šv1.0.0  
**çŠ¶æ€**ï¼šâœ… å·²å®Œæˆå¹¶éªŒè¯é€šè¿‡  
**å¼€å‘è€…**ï¼šAI Assistant  
**é¡¹ç›®**ï¼šxiaozhi-esp32-server

