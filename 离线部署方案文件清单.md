# å°æ™ºESP32æœåŠ¡å™¨ - ç¦»çº¿éƒ¨ç½²æ–¹æ¡ˆæ–‡ä»¶æ¸…å•

æœ¬æ–‡æ¡£åˆ—å‡ºäº†ä¸ºç¦»çº¿éƒ¨ç½²åˆ›å»ºçš„æ‰€æœ‰æ–‡ä»¶ã€‚

---

## ğŸ“‹ åˆ›å»ºçš„æ–‡ä»¶åˆ—è¡¨

### ğŸ“– æ–‡æ¡£æ–‡ä»¶ (docs/)

1. **docs/offline-deployment-README.md** - æ€»è§ˆæ–‡æ¡£
   - æ–‡æ¡£å¯¼èˆªå’Œç´¢å¼•
   - ä½¿ç”¨åœºæ™¯è¯´æ˜
   - å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥
   - ç³»ç»Ÿè¦æ±‚å’Œå®‰å…¨å»ºè®®

2. **docs/offline-deployment-guide.md** - å®Œæ•´éƒ¨ç½²æŒ‡å— â­
   - è¯¦ç»†çš„éƒ¨ç½²æ­¥éª¤
   - é…ç½®è¯´æ˜
   - éªŒè¯æµ‹è¯•æ–¹æ³•
   - æœåŠ¡ç®¡ç†å‘½ä»¤
   - åŸºç¡€æ•…éšœæ’æŸ¥

3. **docs/offline-deployment-quickstart.md** - å¿«é€Ÿéƒ¨ç½²æŒ‡å— â­
   - 5åˆ†é’Ÿå¿«é€Ÿéƒ¨ç½²
   - ç²¾ç®€çš„æ­¥éª¤è¯´æ˜
   - å¸¸è§é—®é¢˜å¿«é€Ÿè§£å†³

4. **docs/offline-deployment-checklist.md** - éƒ¨ç½²æ£€æŸ¥æ¸…å•
   - å®Œæ•´çš„æ£€æŸ¥é¡¹ç›®
   - å…­ä¸ªé˜¶æ®µçš„è¯¦ç»†æ¸…å•
   - å¯æ‰“å°ä½¿ç”¨

5. **docs/offline-deployment-troubleshooting.md** - æ•…éšœæ’æŸ¥æ‰‹å†Œ
   - å¸¸è§é—®é¢˜è¯¦ç»†è§£å†³æ–¹æ¡ˆ
   - ç³»ç»Ÿè¯Šæ–­æ–¹æ³•
   - æ€§èƒ½ä¼˜åŒ–å»ºè®®
   - æ•°æ®æ¢å¤æ–¹æ¡ˆ

### ğŸ› ï¸ è„šæœ¬æ–‡ä»¶ (scripts/)

6. **scripts/offline-package.sh** - Linux/Macæ‰“åŒ…è„šæœ¬
   - è‡ªåŠ¨ç¼–è¯‘é•œåƒ
   - å¯¼å‡ºé•œåƒæ–‡ä»¶
   - å¤åˆ¶é…ç½®æ–‡ä»¶
   - ç”Ÿæˆå‹ç¼©åŒ…

7. **scripts/offline-package.ps1** - Windowsæ‰“åŒ…è„šæœ¬
   - Windows PowerShellç‰ˆæœ¬
   - åŠŸèƒ½ä¸Linuxç‰ˆç›¸åŒ

8. **scripts/offline-deploy.sh** - ç¦»çº¿éƒ¨ç½²è„šæœ¬
   - è‡ªåŠ¨åŠ è½½é•œåƒ
   - é…ç½®ç³»ç»Ÿç¯å¢ƒ
   - å¯åŠ¨æ‰€æœ‰æœåŠ¡
   - å¥åº·æ£€æŸ¥

9. **scripts/install-docker-centos.sh** - Dockerå®‰è£…è„šæœ¬
   - æ”¯æŒCentOS 7/8/Stream
   - è‡ªåŠ¨é…ç½®é•œåƒæº
   - å®‰è£…Dockerå’ŒDocker Compose

10. **scripts/backup.sh** - æ•°æ®å¤‡ä»½è„šæœ¬
    - å¤‡ä»½é…ç½®æ–‡ä»¶
    - å¤‡ä»½æ•°æ®åº“
    - å¤‡ä»½ä¸Šä¼ æ–‡ä»¶
    - è‡ªåŠ¨æ¸…ç†æ—§å¤‡ä»½

11. **scripts/README.md** - è„šæœ¬ä½¿ç”¨è¯´æ˜
    - æ‰€æœ‰è„šæœ¬çš„è¯¦ç»†è¯´æ˜
    - ä½¿ç”¨æ–¹æ³•å’Œç¤ºä¾‹
    - æ•…éšœæ’æŸ¥æŠ€å·§

### âš™ï¸ é…ç½®æ–‡ä»¶ (scripts/)

12. **scripts/docker-compose-offline.template.yml** - Docker Composeæ¨¡æ¿
    - ç¦»çº¿éƒ¨ç½²é…ç½®
    - åŒ…å«èµ„æºé™åˆ¶
    - æ—¥å¿—è½®è½¬é…ç½®
    - ä¼˜åŒ–çš„æ•°æ®åº“å‚æ•°

---

## ğŸ“‚ æ–‡ä»¶ç”¨é€”è¯´æ˜

### æ‰“åŒ…é˜¶æ®µä½¿ç”¨ï¼ˆåœ¨çº¿ç¯å¢ƒï¼‰

```
scripts/offline-package.sh       # Linux/Mac: ä¸€é”®æ‰“åŒ…æ‰€æœ‰å†…å®¹
scripts/offline-package.ps1      # Windows: ä¸€é”®æ‰“åŒ…æ‰€æœ‰å†…å®¹
```

### éƒ¨ç½²é˜¶æ®µä½¿ç”¨ï¼ˆç¦»çº¿ç¯å¢ƒï¼‰

```
scripts/install-docker-centos.sh # å®‰è£…Dockerï¼ˆå¦‚éœ€è¦ï¼‰
scripts/offline-deploy.sh        # ä¸€é”®éƒ¨ç½²æ‰€æœ‰æœåŠ¡
```

### è¿ç»´é˜¶æ®µä½¿ç”¨

```
scripts/backup.sh                # å®šæœŸå¤‡ä»½æ•°æ®
```

### æ–‡æ¡£å‚è€ƒ

```
docs/offline-deployment-README.md          # å…ˆçœ‹è¿™ä¸ªï¼Œäº†è§£æ•´ä½“
docs/offline-deployment-quickstart.md      # å¿«é€Ÿéƒ¨ç½²å‚è€ƒ
docs/offline-deployment-guide.md           # è¯¦ç»†æ­¥éª¤å‚è€ƒ
docs/offline-deployment-checklist.md       # è¾¹éƒ¨ç½²è¾¹å¯¹ç…§
docs/offline-deployment-troubleshooting.md # é‡åˆ°é—®é¢˜æ—¶æŸ¥é˜…
scripts/README.md                          # è„šæœ¬ä½¿ç”¨å‚è€ƒ
```

---

## ğŸ¯ æ¨èçš„é˜…è¯»é¡ºåº

### é¦–æ¬¡éƒ¨ç½²

1. **docs/offline-deployment-README.md** - äº†è§£æ•´ä½“æ–¹æ¡ˆ
2. **docs/offline-deployment-quickstart.md** - å¿«é€Ÿå¼€å§‹
3. **docs/offline-deployment-checklist.md** - å¯¹ç…§æ‰§è¡Œ
4. **docs/offline-deployment-troubleshooting.md** - é‡åˆ°é—®é¢˜æ—¶æŸ¥çœ‹

### è¯¦ç»†å­¦ä¹ 

1. **docs/offline-deployment-guide.md** - å®Œæ•´è¯¦ç»†æŒ‡å—
2. **scripts/README.md** - è„šæœ¬å·¥å…·è¯´æ˜
3. **docs/offline-deployment-troubleshooting.md** - æ·±å…¥æ’æŸ¥æ–¹æ³•

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¬¬ä¸€æ­¥ï¼šæ‰“åŒ…ï¼ˆåœ¨çº¿ç¯å¢ƒï¼‰

**Windows:**
```powershell
cd xiaozhi-esp32-server
.\scripts\offline-package.ps1
```

**Linux/Mac:**
```bash
cd xiaozhi-esp32-server
chmod +x scripts/offline-package.sh
./scripts/offline-package.sh
```

### ç¬¬äºŒæ­¥ï¼šä¼ è¾“

å°†ç”Ÿæˆçš„ `xiaozhi-offline-deployment-*.tar.gz` ä¼ è¾“åˆ°ç›®æ ‡æœåŠ¡å™¨ã€‚

### ç¬¬ä¸‰æ­¥ï¼šéƒ¨ç½²ï¼ˆç¦»çº¿ç¯å¢ƒï¼‰

```bash
# è§£å‹
tar -xzf xiaozhi-offline-deployment-*.tar.gz
cd xiaozhi-offline-deployment-*/

# å®‰è£…Dockerï¼ˆå¦‚éœ€è¦ï¼‰
chmod +x install-docker-centos.sh
sudo ./install-docker-centos.sh

# éƒ¨ç½²
chmod +x offline-deploy.sh
sudo ./offline-deploy.sh
```

### ç¬¬å››æ­¥ï¼šéªŒè¯

è®¿é—® `http://æœåŠ¡å™¨IP:8002` éªŒè¯éƒ¨ç½²æˆåŠŸã€‚

---

## ğŸ“Š æ–‡ä»¶ç»Ÿè®¡

| ç±»å‹ | æ•°é‡ | è¯´æ˜ |
|------|------|------|
| æ–‡æ¡£æ–‡ä»¶ | 5ä¸ª | Markdownæ ¼å¼ï¼Œè¯¦ç»†è¯´æ˜ |
| è„šæœ¬æ–‡ä»¶ | 5ä¸ª | Bashå’ŒPowerShellè„šæœ¬ |
| é…ç½®æ¨¡æ¿ | 1ä¸ª | Docker Composeé…ç½® |
| è¯´æ˜æ–‡æ¡£ | 1ä¸ª | è„šæœ¬ä½¿ç”¨è¯´æ˜ |
| **æ€»è®¡** | **12ä¸ª** | å®Œæ•´çš„ç¦»çº¿éƒ¨ç½²æ–¹æ¡ˆ |

---

## âœ¨ æ–¹æ¡ˆç‰¹ç‚¹

### ğŸ¯ å®Œæ•´æ€§

- âœ… ä»æ‰“åŒ…åˆ°éƒ¨ç½²çš„å®Œæ•´æµç¨‹
- âœ… è¯¦ç»†çš„æ–‡æ¡£è¯´æ˜
- âœ… è‡ªåŠ¨åŒ–è„šæœ¬å·¥å…·
- âœ… æ•…éšœæ’æŸ¥æŒ‡å—
- âœ… è¿ç»´ç»´æŠ¤æ–¹æ¡ˆ

### ğŸš€ æ˜“ç”¨æ€§

- âœ… ä¸€é”®æ‰“åŒ…å’Œéƒ¨ç½²
- âœ… æ¸…æ™°çš„æ­¥éª¤è¯´æ˜
- âœ… å¿«é€Ÿå¼€å§‹æŒ‡å—
- âœ… å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥
- âœ… æ£€æŸ¥æ¸…å•è¾…åŠ©

### ğŸ›¡ï¸ å¯é æ€§

- âœ… æ–‡ä»¶å®Œæ•´æ€§æ ¡éªŒ
- âœ… å¥åº·æ£€æŸ¥æœºåˆ¶
- âœ… è‡ªåŠ¨å¤‡ä»½æ–¹æ¡ˆ
- âœ… è¯¦ç»†çš„æ—¥å¿—è®°å½•
- âœ… é”™è¯¯å¤„ç†æœºåˆ¶

### ğŸ“š å¯ç»´æŠ¤æ€§

- âœ… æ¨¡å—åŒ–çš„è„šæœ¬è®¾è®¡
- âœ… è¯¦ç»†çš„æ³¨é‡Šè¯´æ˜
- âœ… é…ç½®æ–‡ä»¶é›†ä¸­ç®¡ç†
- âœ… ç‰ˆæœ¬æ§åˆ¶æ”¯æŒ
- âœ… è¿ç»´å·¥å…·å®Œå–„

---

## ğŸ”§ è‡ªå®šä¹‰å’Œæ‰©å±•

### æ·»åŠ æ–°çš„å·¥å…·å‡½æ•°

æ‚¨çš„æ–°å·¥å…·å‡½æ•°ï¼ˆå¦‚ `get_temperature_load_rate.py`ï¼‰ä¼šè¢«è‡ªåŠ¨åŒ…å«åœ¨æ‰“åŒ…è¿‡ç¨‹ä¸­ã€‚

ç¡®ä¿ï¼š
1. æ–‡ä»¶ä½äº `main/xiaozhi-server/plugins_func/functions/` ç›®å½•
2. æ‰€éœ€çš„Pythonä¾èµ–å·²æ·»åŠ åˆ° `requirements.txt`
3. åœ¨ `config.yaml` ä¸­æ­£ç¡®é…ç½®ï¼ˆå¦‚éœ€è¦ï¼‰

### ä¿®æ”¹æ‰“åŒ…å†…å®¹

ç¼–è¾‘ `scripts/offline-package.sh` æˆ– `scripts/offline-package.ps1`ï¼Œåœ¨ `copy_configs()` å‡½æ•°ä¸­æ·»åŠ æ‚¨éœ€è¦çš„é¢å¤–æ–‡ä»¶ã€‚

### ä¿®æ”¹éƒ¨ç½²é…ç½®

ç¼–è¾‘ `scripts/docker-compose-offline.template.yml` æ¥è°ƒæ•´ï¼š
- ç«¯å£æ˜ å°„
- èµ„æºé™åˆ¶
- ç¯å¢ƒå˜é‡
- æ•°æ®å·æŒ‚è½½

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### æ–‡æ¡£æ”¯æŒ

- æœ¬åœ°æ–‡æ¡£ï¼šæŸ¥çœ‹ `docs/` ç›®å½•ä¸‹çš„æ–‡æ¡£
- åœ¨çº¿æ–‡æ¡£ï¼šhttps://github.com/xinnan-tech/xiaozhi-esp32-server/tree/main/docs

### ç¤¾åŒºæ”¯æŒ

- é—®é¢˜åé¦ˆï¼šhttps://github.com/xinnan-tech/xiaozhi-esp32-server/issues
- é¡¹ç›®ä¸»é¡µï¼šhttps://github.com/xinnan-tech/xiaozhi-esp32-server

---

## ğŸ“ ç‰ˆæœ¬ä¿¡æ¯

- **æ–¹æ¡ˆç‰ˆæœ¬**: 1.0
- **åˆ›å»ºæ—¥æœŸ**: 2024
- **é€‚ç”¨äº**: å°æ™ºESP32æœåŠ¡å™¨é¡¹ç›®
- **æ”¯æŒç³»ç»Ÿ**: CentOS 7/8/Stream, RHEL, Rocky Linux, AlmaLinux

---

## âœ… éªŒè¯æ¸…å•

ç¡®è®¤ä»¥ä¸‹æ–‡ä»¶éƒ½å·²åˆ›å»ºï¼š

- [ ] docs/offline-deployment-README.md
- [ ] docs/offline-deployment-guide.md
- [ ] docs/offline-deployment-quickstart.md
- [ ] docs/offline-deployment-checklist.md
- [ ] docs/offline-deployment-troubleshooting.md
- [ ] scripts/offline-package.sh
- [ ] scripts/offline-package.ps1
- [ ] scripts/offline-deploy.sh
- [ ] scripts/install-docker-centos.sh
- [ ] scripts/backup.sh
- [ ] scripts/README.md
- [ ] scripts/docker-compose-offline.template.yml

æ‰€æœ‰æ–‡ä»¶åˆ›å»ºå®Œæˆåï¼Œæ‚¨å°±å¯ä»¥å¼€å§‹ä½¿ç”¨è¿™å¥—å®Œæ•´çš„ç¦»çº¿éƒ¨ç½²æ–¹æ¡ˆäº†ï¼

---

**ç¥æ‚¨ä½¿ç”¨é¡ºåˆ©ï¼** ğŸ‰

