# get_temperature_load_rate å·¥å…·å‡½æ•°

## ğŸ“– æ¦‚è¿°

`get_temperature_load_rate` æ˜¯ä¸º xiaozhi-esp32-server é¡¹ç›®æ–°å¢çš„å·¥å…·å‡½æ•°ï¼Œæ”¯æŒé€šè¿‡æ™ºèƒ½å¤šè½®å¯¹è¯äº¤äº’çš„æ–¹å¼è·å–å¹¶ç¡®è®¤ç”¨æˆ·çš„**æ¸©åº¦å’Œè´Ÿè½½ç‡**å‚æ•°è®¾ç½®ã€‚

> **æ³¨æ„**ï¼šæœ¬å‡½æ•°æ˜¯ä» `get_temperature_humidity` æ”¹é€ è€Œæ¥ï¼Œå°†æ¹¿åº¦å‚æ•°æ›¿æ¢ä¸ºè´Ÿè½½ç‡å‚æ•°ã€‚

## âœ¨ ç‰¹æ€§

- âœ… **æ™ºèƒ½å¤šè½®å¯¹è¯** - æ”¯æŒåˆ†æ­¥è¾“å…¥æˆ–ä¸€æ¬¡æ€§è¾“å…¥
- âœ… **å‚æ•°ç¡®è®¤æœºåˆ¶** - é¿å…è¯¯æ“ä½œï¼Œç¡®ä¿å‚æ•°å‡†ç¡®
- âœ… **çµæ´»è¾“å…¥æ ¼å¼** - æ”¯æŒå¤šç§è‡ªç„¶è¯­è¨€è¡¨è¾¾ï¼ˆ22åº¦ã€22â„ƒã€60%ç­‰ï¼‰
- âœ… **å‚æ•°éªŒè¯** - è‡ªåŠ¨éªŒè¯æ¸©åº¦ï¼ˆ-10â„ƒ~50â„ƒï¼‰å’Œè´Ÿè½½ç‡ï¼ˆ0%~100%ï¼‰èŒƒå›´
- âœ… **éšæ—¶ä¿®æ”¹** - ç¡®è®¤å‰å¯éšæ—¶ä¿®æ”¹ä»»ä½•å‚æ•°
- âœ… **å–æ¶ˆæ“ä½œ** - æ”¯æŒéšæ—¶å–æ¶ˆå½“å‰è®¾ç½®æµç¨‹
- âœ… **è‡ªåŠ¨åŠ è½½** - æ— éœ€é¢å¤–é…ç½®ï¼Œç³»ç»Ÿè‡ªåŠ¨æ³¨å†Œ

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. éªŒè¯å®‰è£…

è¿è¡ŒéªŒè¯è„šæœ¬ï¼š

```bash
cd main/xiaozhi-server
python verify_temperature_load_rate.py
```

é¢„æœŸè¾“å‡ºï¼š
```
ğŸ‰ æ‰€æœ‰æ£€æŸ¥é€šè¿‡ï¼ä»£ç ç»“æ„æ­£ç¡®ã€‚
```

### 2. å¯åŠ¨æœåŠ¡

æŒ‰ç…§é¡¹ç›®æ­£å¸¸æµç¨‹å¯åŠ¨ xiaozhi-server æœåŠ¡ã€‚

### 3. å¯¹è¯æµ‹è¯•

é€šè¿‡ç»ˆç«¯è®¾å¤‡æˆ–Webç•Œé¢æµ‹è¯•ï¼š

```
ğŸ‘¤ "è®¾ç½®æ¸©åº¦22åº¦è´Ÿè½½ç‡60%"
ğŸ¤– "æ¸©åº¦ä¸º22â„ƒï¼Œè´Ÿè½½ç‡ä¸º60%ï¼Œè¯·ç¡®è®¤æ˜¯å¦æ­£ç¡®ï¼Ÿ"
ğŸ‘¤ "ç¡®è®¤"
ğŸ¤– {"temperature": "22â„ƒ", "load_rate": "60%", "confirm": true}
```

## ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹1ï¼šä¸€æ¬¡æ€§è®¾ç½®

```
ç”¨æˆ·: "è®¾ç½®æ¸©åº¦25åº¦è´Ÿè½½ç‡70%"
ç³»ç»Ÿ: "æ¸©åº¦ä¸º25â„ƒï¼Œè´Ÿè½½ç‡ä¸º70%ï¼Œè¯·ç¡®è®¤æ˜¯å¦æ­£ç¡®ï¼Ÿ"
ç”¨æˆ·: "ç¡®è®¤"
ç³»ç»Ÿ: {"temperature": "25â„ƒ", "load_rate": "70%", "confirm": true}
```

### ç¤ºä¾‹2ï¼šåˆ†æ­¥è®¾ç½®

```
ç”¨æˆ·: "æˆ‘è¦è®¾ç½®æ¸©åº¦å’Œè´Ÿè½½ç‡"
ç³»ç»Ÿ: "å¥½çš„ï¼Œè¯·å‘Šè¯‰æˆ‘æ¸©åº¦å’Œè´Ÿè½½ç‡å€¼"
ç”¨æˆ·: "æ¸©åº¦22åº¦"
ç³»ç»Ÿ: "æ¸©åº¦å·²è®¾ç½®ä¸º22â„ƒï¼Œè¯·å‘Šè¯‰æˆ‘è´Ÿè½½ç‡å€¼"
ç”¨æˆ·: "60%"
ç³»ç»Ÿ: "æ¸©åº¦ä¸º22â„ƒï¼Œè´Ÿè½½ç‡ä¸º60%ï¼Œè¯·ç¡®è®¤"
ç”¨æˆ·: "å¥½çš„"
ç³»ç»Ÿ: {"temperature": "22â„ƒ", "load_rate": "60%", "confirm": true}
```

### ç¤ºä¾‹3ï¼šä¿®æ”¹å‚æ•°

```
ç”¨æˆ·: "æ¸©åº¦20åº¦è´Ÿè½½ç‡50%"
ç³»ç»Ÿ: "æ¸©åº¦ä¸º20â„ƒï¼Œè´Ÿè½½ç‡ä¸º50%ï¼Œè¯·ç¡®è®¤"
ç”¨æˆ·: "æ¸©åº¦æ”¹æˆ22åº¦"
ç³»ç»Ÿ: "å·²ä¿®æ”¹ï¼Œæ¸©åº¦ä¸º22â„ƒï¼Œè´Ÿè½½ç‡ä¸º50%ï¼Œè¯·ç¡®è®¤"
ç”¨æˆ·: "ç¡®è®¤"
ç³»ç»Ÿ: {"temperature": "22â„ƒ", "load_rate": "50%", "confirm": true}
```

## ğŸ”§ æŠ€æœ¯ä¿¡æ¯

### å‡½æ•°ç­¾å

```python
@register_function(
    "get_temperature_load_rate",
    GET_TEMPERATURE_LOAD_RATE_FUNCTION_DESC,
    ToolType.SYSTEM_CTL,
)
def get_temperature_load_rate(
    conn,
    temperature: str = None,
    load_rate: str = None,
    confirm: bool = False,
    cancel: bool = False
) -> ActionResponse
```

### è¿”å›æ ¼å¼

```json
{
    "temperature": "22â„ƒ",
    "load_rate": "60%",
    "confirm": true
}
```

### æ”¯æŒçš„è¾“å…¥æ ¼å¼

**æ¸©åº¦**ï¼š22åº¦ã€22â„ƒã€22æ‘„æ°åº¦ã€-5åº¦ã€22.5åº¦  
**è´Ÿè½½ç‡**ï¼š60%ã€60ã€0.6

### å‚æ•°èŒƒå›´

- **æ¸©åº¦**ï¼š-10â„ƒ ~ 50â„ƒ
- **è´Ÿè½½ç‡**ï¼š0% ~ 100%

## ğŸ§ª æµ‹è¯•

### è¿è¡Œå•å…ƒæµ‹è¯•

```bash
cd main/xiaozhi-server/plugins_func/functions
python test_get_temperature_load_rate.py
```

### è¿è¡ŒéªŒè¯è„šæœ¬

```bash
cd main/xiaozhi-server
python verify_temperature_load_rate.py
```

## ğŸ“ æ–‡ä»¶ç»“æ„

```
main/xiaozhi-server/
â”œâ”€â”€ plugins_func/functions/
â”‚   â”œâ”€â”€ get_temperature_load_rate.py              # ä¸»å‡½æ•°å®ç°
â”‚   â””â”€â”€ test_get_temperature_load_rate.py         # å•å…ƒæµ‹è¯•
â”œâ”€â”€ verify_temperature_load_rate.py               # éªŒè¯è„šæœ¬
â””â”€â”€ docs/
    â””â”€â”€ get_temperature_load_rate_README.md       # æœ¬æ–‡ä»¶
```

## ğŸ”— é›†æˆåº”ç”¨ç¤ºä¾‹

### è®¾å¤‡è´Ÿè½½ç›‘æ§

```python
@register_function("monitor_device", monitor_desc, ToolType.SYSTEM_CTL)
def monitor_device(conn, params_json: str):
    """ä½¿ç”¨æ¸©åº¦å’Œè´Ÿè½½ç‡å‚æ•°ç›‘æ§è®¾å¤‡çŠ¶æ€"""
    params = json.loads(params_json)
    
    if params.get("confirm"):
        temp = float(params["temperature"].replace("â„ƒ", ""))
        load_rate = float(params["load_rate"].replace("%", ""))
        
        # è°ƒç”¨ç›‘æ§API
        # ...
```

## ğŸ› å¸¸è§é—®é¢˜

### Q1: è´Ÿè½½ç‡çš„å«ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿ

A: è´Ÿè½½ç‡é€šå¸¸æŒ‡è®¾å¤‡çš„å·¥ä½œè´Ÿè½½ç™¾åˆ†æ¯”ï¼ŒèŒƒå›´ä¸º0%-100%ã€‚0%è¡¨ç¤ºç©ºè½½ï¼Œ100%è¡¨ç¤ºæ»¡è½½ã€‚

### Q2: ä¸ºä»€ä¹ˆè´Ÿè½½ç‡èŒƒå›´æ˜¯0%-100%ï¼Ÿ

A: è´Ÿè½½ç‡é€šå¸¸ä»¥ç™¾åˆ†æ¯”è¡¨ç¤ºè®¾å¤‡çš„å·¥ä½œçŠ¶æ€ï¼Œä¸æ¹¿åº¦çš„èŒƒå›´ç›¸åŒã€‚å¦‚éœ€å…¶ä»–èŒƒå›´ï¼Œå¯ä»¥ä¿®æ”¹ `validate_load_rate` å‡½æ•°ã€‚

### Q3: å¦‚ä½•ä¸æ—§çš„ get_temperature_humidity å…±å­˜ï¼Ÿ

A: ä¸¤ä¸ªå‡½æ•°å¯ä»¥åŒæ—¶å­˜åœ¨ï¼Œç³»ç»Ÿä¼šæ ¹æ®å‡½æ•°æè¿°ä¸­çš„å…³é”®è¯åˆ¤æ–­è°ƒç”¨å“ªä¸ªå‡½æ•°ã€‚

## ğŸ“‹ ä¸ get_temperature_humidity çš„åŒºåˆ«

| é¡¹ç›® | get_temperature_humidity | get_temperature_load_rate |
|------|--------------------------|---------------------------|
| ç¬¬äºŒå‚æ•° | humidityï¼ˆæ¹¿åº¦ï¼‰ | load_rateï¼ˆè´Ÿè½½ç‡ï¼‰ |
| å‚æ•°åç§° | humidity | load_rate |
| çŠ¶æ€å­˜å‚¨ | temp_humidity_setting | temp_load_rate_setting |
| å‡½æ•°æè¿°å…³é”®è¯ | æ¸©æ¹¿åº¦ã€æ¹¿åº¦ | æ¸©åº¦è´Ÿè½½ç‡ã€è´Ÿè½½ç‡ |

## ğŸ“ æ›´æ–°è®°å½•

- **v1.0.0** (2024-10-09): ä» get_temperature_humidity æ”¹é€ è€Œæ¥ï¼Œå°†æ¹¿åº¦å‚æ•°æ”¹ä¸ºè´Ÿè½½ç‡å‚æ•°

## ğŸ™ è‡´è°¢

æœ¬å‡½æ•°åŸºäº `get_temperature_humidity` å·¥å…·å‡½æ•°æ”¹é€ è€Œæˆã€‚

---

**åˆ›å»ºæ—¶é—´**ï¼š2024-10-09  
**ç‰ˆæœ¬**ï¼šv1.0.0  
**çŠ¶æ€**ï¼šâœ… å·²å®Œæˆå¹¶é€šè¿‡éªŒè¯

